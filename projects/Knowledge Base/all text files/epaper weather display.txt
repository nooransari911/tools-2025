So today we're going to have a look over a very interesting IoT project called as portable weather station and it got a lot of features as compared to the other similar projects like first of all it's based on the e-aper display which not just look neat but saves a lot of power. So we can run this weather station on battery for several days without charging. Secondly, it not just display the current temperature and humidity data. Rather, it is loaded with a lot of information like current date and time, current location, sunrise and sunset time and even 3 days weather forecast, which is insane. Moreover, it got a built-in sensor with the help of which you can not just monitor the outside temperature, but you can also visualize the realtime temperature and humidity data of your room when the project is installed.

So, it's a perfect DIY project for your desk. And now before going on to knowing how we built the project, let me first thank the sponsor of today's video, Digi. Digi is a global leader in cutting edge component distribution of electronic components and automation products worldwide. They provide more than 15.9 million components from over 3,000 manufacturers with product in stock available for immediate shipment. Also with their fast shipping and excellent customer support, you can always trust that your product will arrive on time and in top condition.

So do remember to check out DGY for your next project. Okay. So now let me show you the schematic of this project and let's discuss some of the important components. So here's the complete schematic of our portable weather station project. And here the main component is the ESP32S3 chipset which as we all know got built-in Wi-Fi and Bluetooth support in it.

And this particular variant got builtin 16 MB of flash. So that's the main controller and the Wi-Fi driver of the project. Secondly, we got the connector for attaching the e-aper display. So let me show you which e- paper display we are using. So here we are using this particular variant of the e-aper display which comes in three colors white, red and black which is mentioned here and it got the resolution of 400x 300 pixels or dots you can say.

And for the projects like the portable weather station, eBay but display is kind of an ideal choice because as I said in the beginning, it consumes very less power because it just need power to update the display and once it's updated, it no longer need the power to display that same content on it. So that is all about the e-aper display. Let us see what is the other major component. Then after that here we are also using a temperature and humidity sensor to monitor indoor temperature and humidity value. And here is the model of that particular sensor.

And this sensor is very easy to interact as it works on the I2C protocol and the operating range is from minus40° C to 125° C. So that's the sensor which is integrated in our project. Other than that we also have this max 189 at battery charging IC which is used for charging the lithium based batteries. And here the charging current is up to 1.4 ampere which is really good. Now for the battery charging circuit here on board we also have the LDO the load dropout voltage regulator IC ADP124.

Let me show you specifications. So here's that IC. It is an 3.3 volt linear regulator IC. And if I show you the data sheet then here as you can see that it is a very low dropout voltage of just 130 m volt. So whenever you want to get the 3.3 volt stable output voltage from a battery LDO is recommended.

And as this project also works on a battery, we are using a uh 3.3 volt LDO here. After that, here's the last component which is the USB type-C which will be used for both programming and charging the battery. So that was all about the complete schematic. And after finalizing the schematic, we got the custom PCB printed and later aftering all the components on it, here is the final look of our project. And with this, we are done with the hardware part of the project.

And now let me take you to Ardino ID and let me show you the code used in it. So here's the complete code used in our project. It's a pretty pretty pretty long code and no we haven't written it from scratch rather we took the reference of one GitHub repository. Let me show you. So here's that GitHub repository called as G uh G6EJD which is basically from David and he made an amazing uh library for displaying the weather related information on an e-aper display and it is not just limited to only uh one kind of e-aper display.

Let me show you a couple of images like uh he have created the library the UI for different different types of eBay display that can be 800 by 480 pixel that can be 640x 384 pixels that can be 400 by 300 pixels that we are using right now. So the as you can see the UI is kind of same as shown in this particular image and so on so forth. We have several different kind of layouts already prepared uh in this particular library which are ready to be used. Okay. So he has done some amazing work in this particular library and we took the uh same code like the reference of this particular uh repository for making our own project.

So now what I'll do I'll let you know the important uh changes that to be made to make it work on your end and also show you a couple of uh things that we have added here to make it very very low power. Okay. So first of all uh you can go to config.hader edge header library and this is the only header file that you need to change or modify to make it work on your end. Other than that everything will be remain as it is. First thing is SID name and password because definitely this project do require internet connectivity to get to get the data.

Then we need to get the API key from open weathermap.org. So let's go to that website. So here is that website and here you need to make your own account and after making the account you can go to the my API key section and here you can just type the name of the API key and click on the generate button and it will generate an API key for you which you need to copy it from here and later you just need to paste it here. Simple right? Later you need to provide the latitude, longitude, the city, country and everything.

And for that what you can do is you can go uh here and just type the city name like open weather map got the data of almost all the city in the world. So my city is Ahmedabad. So I'll search for Ahmedabad and here you can see Ahmedabad India is available and here are the geo coordinates or the location context you can say. So you can provide that same latitude longitude here the city name content everything you can provide here all the details. Okay.

And here we are also using the NTP server to display the current date and time on the display. So those are the important credentials that need to be changed as per your location as per your account. After that let's just go back to the desktop weather station like the main Ardino file and here we need to have couple of libraries to be installed and those libraries which are needed to be installed the link is already provided here. So you can just go to that link download the zip file and install into your computer. And here after declaring all the libraries the actual code start like initializing the sensor initializing the display uh beginning the seal communication and everything.

So that particular thing is already explained in the comments. Now here I want to discuss one really important thing which is the power saving feature. So what we have added here is uh let me show you those uh parameters. So these three parameters will help you to save a lot of power. First of all sleep duration.

So here it is mentioned as 30 which means the display will update after every 30 minutes. Okay. You can change the time here as you want. For a demo purpose we will change it to once. software every 1 minute uh the display will uh refresh and get the new data later. Uh here we have the wake up time and sleep time.

So what is this? So basically this project is meant to be put on a desk where we can you know have a glance over what's the current weather, what's the forecast, everything in the daytime. Okay after midnight like after 12 generally we believe we go to sleep and we no longer uh sitting on our desk. So what we have done here is after 23 hours okay that means after 11 p.m. till uh 7:00 a.m. in the morning the display won't get updated to save way more power. Okay, it will be in the sleep mode only.

It won't wake up. Okay, so you can definitely change the time here. This is a 24-hour clock by the way. So you can change this 7 to maybe 5:00 a.m. as well. You can change the 23 to let's say 20.

This totally depends upon your use case. Okay, but those variables are for that particular purposes and you can change it and you can play with it. You can save the battery life as much as you want. Okay. And after that the setup part begins and we are initializing the display.

We are displaying everything. We are making the internet connected everything. So basically all the lines of the code has proper commands on it. So you can easily understand it and if I explain all the lines here I know I won't be getting that much watch time here. People generally skip the code explanation part.

So just keep it short and crisp. I just explained the important parameters. I just explained what things you need to change and how to get all the credentials. Everything is explained. Okay.

And now it's time to upload the code. For that, you need to go to tools uh into the boards and here you need to select the board as ESP32S3 D module. After that, just select the right comp port. Well, it's not showing. Let me just plug it out and plug it in once again.

Okay. So, here is that right comp port. And after selecting both of them, just hit the upload button. And if you have done all the things correct while the code will upload without any error. Just to give you the reference here I am using the ESP2 boards package version 3.0.0 and the Ardino ID version 2.3.2.

Okay. So here the code is successfully uploaded. And after uploading the code when I powered up the display with the battery as you can see I started getting the data as expected. I'm getting the outside weather information from internet and also getting the indoor temperature and humidity value through the built-in sensor. So after that complete project, we also designed a 3D printed case for it and later after getting its 3D prints, we started assembling the hardware part inside the casing and later we also attach a stand on the back to put it at a rest position on our desk.

And after assembling everything, here is the final look of our portable weather station. Isn't that looks super cool on the desk? And that was all about today's video. And yeah, that being said, Digi