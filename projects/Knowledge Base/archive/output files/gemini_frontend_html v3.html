<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dummy AI Response</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap');

        :root {
            --bg-color: #000000;
            --text-color: #e0e0e0;
            --heading-color: #ffffff;
            --primary-color: #007bff; /* A subtle blue for contrast */
            --secondary-color: #444444;
            --border-color: #333333;
            --card-bg: #1a1a1a;
            --code-bg: #2c2c2c;
            --label-color: #bbbbbb;
            --description-color: #999999;
            --link-color: #61dafb; /* A light blue for links */
            --success-color: #28a745;
            --warning-color: #ffc107;
            --error-color: #dc3545;

            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
            line-height: 1.6;
            font-size: 16px;
        }

        body {
            padding: 2rem;
        }

        #app-container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--bg-color); /* Ensure container bg matches */
            padding: 2rem;
            border-radius: 8px;
             /* Subtle shadow for depth in dark mode */
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.05);
        }

        h1 {
            color: var(--heading-color);
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 700;
            font-size: 2.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        h2 {
             color: var(--heading-color);
             margin-top: 2rem;
             margin-bottom: 1rem;
             font-weight: 500;
             border-bottom: 1px solid var(--secondary-color);
             padding-bottom: 0.5rem;
         }

        .section {
            background-color: var(--card-bg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .section h2 {
            margin-top: 0;
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0.8rem;
            font-size: 1.4rem;
            color: var(--primary-color);
         }

        .section p {
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }

        #list-container {
            margin-top: 2rem;
        }

        .list-item {
            background-color: var(--card-bg);
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            overflow: hidden; /* Ensure content doesn't spill out */
        }

        .list-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
        }

        .item-header {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1rem;
            padding-bottom: 1rem;
        }

        .item-label {
            font-weight: 700;
            color: var(--heading-color);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            word-break: break-word; /* Handle long labels */
        }

        .item-description, .item-source {
            font-size: 0.9rem;
            color: var(--description-color);
            margin-bottom: 0.3rem;
            word-break: break-word; /* Handle long descriptions/sources */
        }
         .item-description strong, .item-source strong {
            color: var(--label-color);
         }

        .item-content {
            margin-top: 1rem;
        }

        .content-label {
            display: block;
            font-size: 0.85rem;
            color: var(--label-color);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .content {
            background-color: var(--code-bg);
            padding: 0.8rem 1rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-family: monospace;
            font-size: 0.95rem;
            color: var(--text-color);
            word-wrap: break-word; /* Wrap long content */
            white-space: pre-wrap; /* Preserve whitespace and wrap */
            margin-top: 0.5rem;
        }

        .content.string-content,
        .content.integer-content,
        .content.float-content,
        .content.boolean-content,
        .content.none-content {
             white-space: normal; /* Allow normal wrapping for simple text */
             font-family: var(--font-family); /* Use standard font for simple types */
         }
        .content.none-content {
            font-style: italic;
            color: var(--description-color);
        }

        .content.boolean-content {
            font-weight: bold;
        }
        .content.boolean-content.true { color: var(--success-color); }
        .content.boolean-content.false { color: var(--warning-color); }


        .content.list-content {
            padding: 0;
            background-color: transparent;
            border: none;
            margin-left: 1.5rem; /* Indent list */
            font-family: var(--font-family);
        }

        .content.list-content ul {
            list-style-type: disc;
            padding-left: 1.5rem; /* Indentation for bullets */
        }

        .content.list-content li {
            margin-bottom: 0.5rem;
            background-color: var(--code-bg); /* Give items a background */
            padding: 0.5rem 0.8rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }


        .content.dict-content {
            font-family: var(--font-family);
            background-color: transparent;
            border: none;
            padding: 0;
        }

        .dict-pair {
            background-color: var(--code-bg);
            padding: 1rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .dict-key {
            font-weight: bold;
            color: var(--primary-color);
            margin-right: 0.5rem;
            display: block;
            margin-bottom: 0.5rem;
             word-break: break-all; /* Break long keys */
        }

        .dict-value {
            font-family: monospace;
            color: var(--text-color);
            white-space: pre-wrap; /* Preserve formatting */
            word-wrap: break-word;
            display: block; /* Ensure value starts on new line if needed */
            padding: 0.5rem;
            background-color: #333333; /* Slightly different bg for value */
            border-radius: 3px;
            margin-top: 0.5rem;
        }

        /* Styles for nested JSON objects within dict values */
        .nested-json {
            margin-top: 0.5rem;
            padding-left: 1rem;
            border-left: 2px solid var(--primary-color);
        }
        .nested-json-pair {
            margin-bottom: 0.3rem;
        }
        .nested-json-key {
             font-weight: bold;
             color: var(--label-color);
             margin-right: 0.5em;
         }
        .nested-json-value {
            color: var(--text-color);
        }


        .loading, .error {
            text-align: center;
            font-size: 1.2rem;
            padding: 2rem;
            color: var(--description-color);
        }
        .error {
            color: var(--error-color);
            background-color: rgba(220, 53, 69, 0.1);
            border: 1px solid var(--error-color);
            border-radius: 4px;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            #app-container {
                padding: 1rem;
            }
            h1 {
                font-size: 2rem;
            }
            .list-item, .section {
                padding: 1rem;
            }
        }

    </style>
</head>
<body>
    <div id="app-container">
        <h1>Dummy AI Response</h1>

        <div id="summary-container">
            <!-- Summary will be loaded here -->
        </div>
        <div id="notes-container">
             <!-- Notes will be loaded here -->
         </div>

        <div id="list-container">
            <div class="loading">Loading data...</div>
            <!-- List items will be loaded here -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const listContainer = document.getElementById('list-container');
            const summaryContainer = document.getElementById('summary-container');
            const notesContainer = document.getElementById('notes-container');
            const dataUrl = 'sample generic response.json'; // Make sure this file exists in the same directory or provide the correct path

            // Function to safely render possibly nested JSON within dict values
            function renderNestedJson(jsonObject, parentElement) {
                const container = document.createElement('div');
                container.className = 'nested-json';

                for (const key in jsonObject) {
                    if (Object.hasOwnProperty.call(jsonObject, key)) {
                        const pairDiv = document.createElement('div');
                        pairDiv.className = 'nested-json-pair';

                        const keySpan = document.createElement('span');
                        keySpan.className = 'nested-json-key';
                        keySpan.textContent = `${key}:`;
                        pairDiv.appendChild(keySpan);

                        const valueSpan = document.createElement('span');
                        valueSpan.className = 'nested-json-value';
                        const value = jsonObject[key];

                        if (typeof value === 'object' && value !== null) {
                             // Recursively render nested objects - keep it simple for now
                             valueSpan.textContent = JSON.stringify(value, null, 2); // Simple stringify for deeper levels
                             valueSpan.style.whiteSpace = 'pre-wrap'; // Ensure formatting is kept
                        } else {
                            valueSpan.textContent = value;
                        }
                        pairDiv.appendChild(valueSpan);
                        container.appendChild(pairDiv);
                    }
                }
                parentElement.appendChild(container);
            }


            // Function to render a single ListDataItem
            function renderListItem(item) {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'list-item';

                let contentHtml = '';
                let contentLabelText = `Content (Type: ${item.type})`;

                // --- Header (Label, Description, Source) ---
                const headerDiv = document.createElement('div');
                headerDiv.className = 'item-header';

                if (item.label) {
                    const labelP = document.createElement('p');
                    labelP.className = 'item-label';
                    labelP.textContent = item.label;
                    headerDiv.appendChild(labelP);
                }
                 if (item.description) {
                     const descP = document.createElement('p');
                     descP.className = 'item-description';
                     descP.innerHTML = `<strong>Description:</strong> ${item.description}`;
                     headerDiv.appendChild(descP);
                 }
                 if (item.source) {
                     const sourceP = document.createElement('p');
                     sourceP.className = 'item-source';
                     sourceP.innerHTML = `<strong>Source:</strong> ${item.source}`;
                     headerDiv.appendChild(sourceP);
                 }
                 itemDiv.appendChild(headerDiv);


                // --- Content ---
                const contentContainerDiv = document.createElement('div');
                contentContainerDiv.className = 'item-content';

                const contentLabel = document.createElement('span');
                contentLabel.className = 'content-label';
                contentLabel.textContent = contentLabelText;
                contentContainerDiv.appendChild(contentLabel);

                const contentDiv = document.createElement('div');

                switch (item.type) {
                    case 'str':
                        contentDiv.className = 'content string-content';
                        contentDiv.textContent = item.string_content !== null ? item.string_content : 'N/A';
                        break;
                    case 'int':
                        contentDiv.className = 'content integer-content';
                        contentDiv.textContent = item.integer_content !== null ? item.integer_content : 'N/A';
                        break;
                    case 'float':
                        contentDiv.className = 'content float-content';
                        contentDiv.textContent = item.float_content !== null ? item.float_content : 'N/A';
                        break;
                    case 'bool':
                        contentDiv.className = `content boolean-content ${item.boolean_content ? 'true' : 'false'}`;
                        contentDiv.textContent = item.boolean_content !== null ? item.boolean_content : 'N/A';
                        break;
                    case 'list_str':
                        contentDiv.className = 'content list-content';
                        if (item.list_str_content && item.list_str_content.length > 0) {
                            const ul = document.createElement('ul');
                            item.list_str_content.forEach(listItem => {
                                const li = document.createElement('li');
                                li.textContent = listItem;
                                ul.appendChild(li);
                            });
                            contentDiv.appendChild(ul);
                        } else {
                             contentDiv.textContent = '[]'; // Indicate empty list
                             contentDiv.style.fontFamily = 'monospace';
                        }
                        break;
                    case 'dict_str_items':
                    case 'dict_int_items': // Treat similarly for rendering
                        contentDiv.className = 'content dict-content';
                        const kvPair = item.dict_str_content || item.dict_int_content;
                        if (kvPair) {
                            const pairDiv = document.createElement('div');
                            pairDiv.className = 'dict-pair';

                            const keySpan = document.createElement('span');
                            keySpan.className = 'dict-key';
                            keySpan.textContent = kvPair.key;
                            pairDiv.appendChild(keySpan);

                            const valueSpan = document.createElement('span');
                            valueSpan.className = 'dict-value';

                            // Check if value is a JSON string
                            let isJsonValue = false;
                            let parsedJson = null;
                            if (typeof kvPair.value === 'string' && kvPair.value.trim().startsWith('{') && kvPair.value.trim().endsWith('}')) {
                                try {
                                    parsedJson = JSON.parse(kvPair.value);
                                    isJsonValue = true;
                                } catch (e) {
                                    // Not valid JSON, treat as regular string
                                    isJsonValue = false;
                                }
                            }

                            if (isJsonValue) {
                                valueSpan.textContent = ''; // Clear any default text
                                renderNestedJson(parsedJson, valueSpan); // Render the parsed JSON object
                            } else {
                                valueSpan.textContent = kvPair.value !== null ? kvPair.value : 'N/A';
                            }

                            pairDiv.appendChild(valueSpan);
                            contentDiv.appendChild(pairDiv);
                        } else {
                            contentDiv.textContent = 'No content provided';
                            contentDiv.classList.add('none-content');
                             contentDiv.style.fontFamily = 'var(--font-family)';
                        }
                        break;
                    case 'None':
                    default:
                        contentDiv.className = 'content none-content';
                        contentDiv.textContent = 'No Content (Type: None)';
                         contentDiv.style.fontFamily = 'var(--font-family)';
                        break;
                }

                contentContainerDiv.appendChild(contentDiv);
                itemDiv.appendChild(contentContainerDiv);

                return itemDiv;
            }

            // Fetch and render data
            fetch(dataUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // Clear loading indicator
                    listContainer.innerHTML = '';

                    // Assuming the structure is an array containing one main object
                    // Or directly the object { structured_list: [], notes: "", summary: "" }
                    // The provided example is an array with one element.
                    const responseData = Array.isArray(data) ? data[0] : data;

                    if (!responseData || !responseData.structured_list) {
                         throw new Error("Invalid data structure: 'structured_list' not found.");
                    }


                    // Render Summary (if exists)
                    if (responseData.summary) {
                         const summarySection = document.createElement('div');
                         summarySection.className = 'section';
                         summarySection.innerHTML = `<h2>Summary</h2><p>${responseData.summary}</p>`;
                         summaryContainer.appendChild(summarySection);
                    }

                     // Render Notes (if exists)
                     if (responseData.notes) {
                         const notesSection = document.createElement('div');
                         notesSection.className = 'section';
                         notesSection.innerHTML = `<h2>Notes</h2><p>${responseData.notes}</p>`;
                         notesContainer.appendChild(notesSection);
                     }


                    // Render List Items
                    if (responseData.structured_list.length > 0) {
                         responseData.structured_list.forEach(item => {
                            const listItemElement = renderListItem(item);
                            listContainer.appendChild(listItemElement);
                         });
                    } else {
                        listContainer.innerHTML = '<div class="loading">No items found in the list.</div>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching or rendering data:', error);
                    listContainer.innerHTML = `<div class="error">Failed to load data: ${error.message}. Please check the console and ensure 'sample generic response.json' is accessible.</div>`;
                     // Clear other containers too on error
                    summaryContainer.innerHTML = '';
                    notesContainer.innerHTML = '';
                });
        });
    </script>
</body>
</html>
