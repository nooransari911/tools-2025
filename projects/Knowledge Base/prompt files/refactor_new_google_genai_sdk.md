This is my old code. It uses old google GenAI SDK. Transition it to new SDK. I have actual relevant sections of the docs to transition to new SDK. Generate only the parts changed. Ensure that you dont break the code. Ensure that the changes correctly follow the guide and does not make unneccessary changes. Show only the functions with changes and the changes within them along with the position of changes. Use human-readable form for changes, not git diff form.
